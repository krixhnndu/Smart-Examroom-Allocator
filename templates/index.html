<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Classroom Exam Allocation Generator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>üéì Smart Classroom Exam Allocation Generator</h1>
            <p>Automate exam seating arrangements for your college</p>
        </header>

        <div class="upload-section">
            <h2>Upload CSV Files</h2>
            
            <div class="file-upload-container">
                <div class="file-upload">
                    <label for="students-csv">
                        <div class="upload-box">
                            <span class="upload-icon">üìÑ</span>
                            <span class="upload-text">Students CSV</span>
                            <span class="file-name" id="students-file-name">No file chosen</span>
                        </div>
                    </label>
                    <input type="file" id="students-csv" accept=".csv" hidden>
                </div>

                <div class="file-upload">
                    <label for="classrooms-csv">
                        <div class="upload-box">
                            <span class="upload-icon">üè´</span>
                            <span class="upload-text">Classrooms CSV</span>
                            <span class="file-name" id="classrooms-file-name">No file chosen</span>
                        </div>
                    </label>
                    <input type="file" id="classrooms-csv" accept=".csv" hidden>
                </div>
            </div>
        </div>

        <div class="year-selection">
            <h2>Select Academic Year(s)</h2>
            <div class="year-buttons">
                <button class="year-btn" data-year="1">1st Year</button>
                <button class="year-btn" data-year="2">2nd Year</button>
                <button class="year-btn" data-year="3">3rd Year</button>
                <button class="year-btn" data-year="4">4th Year</button>
            </div>
            <p class="year-hint">Click to select multiple years</p>
        </div>

        <div class="action-section">
            <button id="generate-btn" class="generate-btn">Generate Allocation</button>
        </div>

        <div id="loading" class="loading" style="display: none;">
            <div class="spinner"></div>
            <p>Generating allocation...</p>
        </div>

        <div id="error-message" class="error-message" style="display: none;"></div>

        <div id="results-section" style="display: none;">
            <div class="results-header">
                <h2>Allocation Results</h2>
                <div class="stats">
                    <div class="stat-box">
                        <span class="stat-label">Total Students</span>
                        <span class="stat-value" id="total-students">0</span>
                    </div>
                    <div class="stat-box">
                        <span class="stat-label">Students Allocated</span>
                        <span class="stat-value" id="allocated-students">0</span>
                    </div>
                    <div class="stat-box">
                        <span class="stat-label">Rooms Used</span>
                        <span class="stat-value" id="rooms-used">0</span>
                    </div>
                </div>
                <button id="download-pdf-btn" class="download-btn">üì• Download as PDF</button>
            </div>

            <div id="allocation-table" class="allocation-table">
                <!-- Results will be inserted here -->
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
